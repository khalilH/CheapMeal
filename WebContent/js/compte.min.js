$(function(){function e(e){var r=/^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/;return r.test(e)}function r(){console.log("changerEmail");var r=$("#newMail").val();return e(r)?(console.log("changerEmail: ça passe"),void $.ajax({type:"POST",url:"user/changerEmail",data:"cle="+getCookie(C_NAME_KEY)+"&newemail="+r,dataType:"json",success:function(e){void 0==e.erreur?alert("Succès: votre adresse email a été modifiée"):40==e.erreur?(alert("Votre session a expiré"),deconnexion()):alert("Erreur: "+e.message)},error:function(e,r,o){alert(e+" "+r+" "+o)}})):void alert("Veuillez entrer une adresse email valide")}function o(){var e=$("#currentMdp").val(),r=$("#newMdp").val(),o=$("#confirmationMdp").val();r.length<6&&alert("Le nouveau mot de passe doit contenir au moins 6 caractères"),$("#newMdp").val()!=$("#confirmationMdp").val()&&alert("Les mots de passe doivent correspondre !"),$.ajax({type:"POST",url:"user/changerMdp",data:"cle="+getCookie(C_NAME_KEY)+"&mdp="+e+"&newMdp="+r+"&confirmationMdp="+o,dataType:"json",success:function(e){void 0==e.erreur?alert("Succès: votre mot de passe a été modifiée"):40==e.erreur?(alert("Votre session a expiré"),deconnexion()):alert("Erreur: "+e.message)},error:function(e,r,o){alert(e+" "+r+" "+o)}})}function a(){var e=$("#bio").val();console.log(e),$.ajax({type:"POST",url:"profil/ajouterBio",data:"cle="+getCookie(C_NAME_KEY)+"&bio="+e,dataType:"json",success:function(e){void 0==e.erreur?alert("Succès: votre bio a été modifiée"):40==e.erreur&&(alert("Votre session a expiré"),deconnexion())},error:function(e,r,o){alert(e+" "+r+" "+o)}})}var n=getCookie(C_NAME_LOGIN);console.log(n),$("#login").val(n),$("#login").prop("disabled",!0),$("#form_compte").on("submit",function(e){e.preventDefault(),r()}),$("#form-mdp").on("submit",function(e){e.preventDefault(),o()}),$("#form-bio").on("submit",function(e){e.preventDefault(),a()})});